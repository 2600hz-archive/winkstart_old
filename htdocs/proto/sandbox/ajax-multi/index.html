<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Amplify Sandbox</title>
	<script src="../../../external/jquery-1.4.4.js"></script>
	<script src="request.js"></script>
	<script>
	amplify.request.define( "simplejson", "ajax", {
		type: "GET",
		url: "simplejson.php",
		dataType: "json"
	});

	amplify.request( "simplejson", {}, function( data ) {
		console.log( "simplejson" );
		console.log( data );
	});
	
	
	amplify.request.define( "simplejsend", "ajax", {
		decoder: "jsend",
		url: "simplejson.php",
		dataType: "json"
	});
	
	amplify.request( "simplejsend", {}, function( data ) {
		console.log( "simplejsend" );
		console.log( data );
	});
	
	
	amplify.request.define( "simplehello", "ajax", {
		decoder: function( response ) {
			response.success( response.data.data.hello );
		},
		url: "simplejson.php",
		dataType: "json"
	});
	
	amplify.request( "simplehello", {}, function( data ) {
		console.log( "simplehello" );
		console.log( "hello, " + data );
	});
	

	amplify.request.decoders.xml2json = function( response ) {
		response.success({
			xml: "json",
			hello: $( response.data ).find( "hello" ).text()
		});
	};
	
	amplify.request.define( "simplexml", "ajax", {
		decoder: "xml2json",
		url: "simple.xml",
		dataType: "xml"
	});

	amplify.request( "simplexml", {}, function( data ) {
		console.log( "simplexml" );
		console.log( data );
	});


	amplify.request.decoders.multi = function( response ) {
		$.each( response.data.split( "-----" ), function( i, item ) {
			response.success( $.parseJSON( item ) );
		});
	};
	amplify.request.define( "multijson", "ajax", {
		url: "multijson.php",
		decoder: "multi"
	});

	amplify.request( "multijson", {}, function( data ) {
		console.log( "multijson" );
		console.log( data );
	});
	</script>
</head>
<body>
</body>
</html>
